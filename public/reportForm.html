<!DOCTYPE html>
<html lang="en">
<head>
    <title>Report an Incident | IRAS</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta content='Incident Report and Awareness System' property='og:title' />
    <meta content='A crowd sourced information of incidents in your area' property='og:description' />
    <meta content='/' property='og:url' />
    <meta property='og:site_name' content='IRAS!'>
    <meta content='images/branding/logo.png' property='og:image' />
    <meta content='#2f3136' name='theme-color'/>
    <link rel="icon" type="image/x-icon" href="images/branding/logo.png"> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=search" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <link rel="stylesheet" href="css/reportForm.css">
</head>
<body>
    <header>
        <div id="main-header"></div>
    </header>

    <div class="reportContainer">
        <div class="bodyContainer">
            <div class="mapContainer">
                
                <div id="search-overlay" class="search-overlay">
                    <i class="material-symbols-outlined">search</i>
                    <input type="text" class="search-input" id="addressSearchMap" placeholder="Search Address">
                    <ul id="searchResultsMap" class="search-results-list"></ul>
                </div>

                <div id="map"></div>
            </div>

            <div class="formContainer">
                <h1>Report an Incident</h1>
                <form id="reportform" enctype="multipart/form-data">
                    <div class="report-input typeInput">
                        <h4>Incident Type</h4>
                        <select name="incidentType" id="incidentType" class="incidentType" required>
                            <option value="Select" selected hidden>Select a Type</option>
                            <option value="Fire">Fire</option>
                            <option value="Assault">Assault</option>
                            <option value="Theft">Theft</option>
                            <option value="Flooding">Flooding</option>
                            <option value="Suspicious Activity">Suspicious Activity</option>
                            <option value="Road Damage">Road Damage</option>
                            <option value="Waste Management">Waste Management</option>
                            <option value="Harassment">Harassment</option>
                            <option value="Other">Other</option>
                        </select>   
                    </div>

                    <div class="timeDate">
                        <h4>Date & Time</h4>
                        <div class="report-class">
                            <div class="report-input dateInput">
                                <input type="date" class="incidentDate" id="incidentDate" required>
                            </div>
                            <div class="report-input timeInput">
                                <input type="time" class="incidentTime" id="incidentTime" placeholder="Time" required>
                            </div>
                        </div>
                    </div>
    
                    <div class="report-input">
                        <h4>Description</h4>
                        <textarea name="description" id="description" required></textarea>
                    </div>

                    <div class="report-input">
                        <h4>Specific Address <span>(Please provide more details)</span> </h4>
                        <input type="text" class="longi-lati" id="address" required>
                    </div>

                   
                    <div class="timeDate report-input">
                        <h4>Pin Location <span>(Click on the map)</span></h4>
                        <div class="report-class">
                            <div class="report-input dateInput">
                                <input class="incidentDate" id="longitude" placeholder="Longitude" required readonly>
                            </div>
                            <div class="report-input timeInput">
                                <input class="incidentTime" id="latitude" placeholder="Latitude" required readonly>
                            </div>
                        </div>
                    </div>
    
                   <div class="report-input generalAddress">
                        <h4>General Address</h4>
                        <div style="position: relative;">
                            <input type="text" class="longi-lati search-input" id="addressSearch" placeholder="ðŸ”Ž Search Address">
                            <ul id="searchResults" class="search-results-list"></ul>
                        </div>
                    </div>

    
                    <div class="mapContainer mobile-map" id="mapmobile">
                        <h1>Map</h1>
                    </div>
    
                    <div class="addPhoto" id="addPhoto">
                        <h4>Add Photo</h4>
                        <div class="addPhotos">
                            <input type="file" name='photo' class="evidence" id="evidence" hidden accept="image/*">
                            <label for="evidence">Drag & Drop Photo</label>
                        </div>
                    </div>
                    <button class="submitReport" id="submitReport">Submit Report</button>
                </form>
            </div>
        </div>
    </div>
    <script src="js/header.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="js/message.js"></script>
    <script src="js/reports.js"></script>
    <script src="js/map.js"></script>
    <script src="js/reportForm.js"></script>
    <script>
        fetch('../api/loggedin.php')
    .then(response => response.json())
    .then(data => {
        if (data.status !== 'logged_in') {
            showErrorPopup(`Log in first to report an incident`,'../public/log_in.html');
        }
        
    });
    </script>
    <script src="js/dashboard.js"> </script>

</body>
</html>